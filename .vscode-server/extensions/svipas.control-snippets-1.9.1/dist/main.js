module.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n){e.exports=require("vscode")},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("path")},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.activate=void 0;const i=t(0),o=t(4),s=t(5),a=t(6);function r(){i.commands.executeCommand("workbench.action.reloadWindow")}function l(){return i.window.showWarningMessage("Reload or restart of VS Code is required after disable or enable snippets from extensions to take effect.",{modal:!1},{title:"Reload Window"})}n.activate=async function(e){const n=new s.ExtensionStore(e.globalState),t=i.commands.registerCommand("extension.control-snippets",async e=>{try{if(!await async function(e){const n=await o.getAllExtensionsFromVSCode(),t=n.all.map(e=>({label:e.name,description:e.description,picked:e.isSnippetsEnabled})),s=await i.window.showQuickPick(t,{canPickMany:!0,ignoreFocusOut:!0,matchOnDescription:!0,placeHolder:"Select extension whose snippets to disable or enable"},e);if(!s)return!1;const r=[];if(0===s.length){if(n.isAllDisabled)return!1;for(const e of n.enabled)await a.disableSnippetForExtension(e);return!0}if(s.length===n.all.length&&n.isAllEnabled)return!1;let l=!1;for(const e of s){const t=n.all.find(n=>n.id===o.getExtensionIdFromText(e.description));t&&(t.isSnippetsEnabled?r.push(t):(await a.enableSnippetForExtension(t),r.push(t),l=!0))}for(const e of n.enabled){r.find(n=>n.id===e.id)||(await a.disableSnippetForExtension(e),l=!0)}return l}(null==e?void 0:e[0]))return;const{disabled:t}=await o.getAllExtensionsFromVSCode();await Promise.all([n.saveDisabledExtensions(t),n.updateVSCodeVersion()]);const s=await i.window.showInformationMessage("To disable or enable snippets from extensions reload is required.",{modal:!0},{title:"Cancel",isCloseAffordance:!0},{title:"Reload Window"});if("Reload Window"===(null==s?void 0:s.title))return void r();const d=await l();"Reload Window"===(null==d?void 0:d.title)&&r()}catch(e){i.window.showErrorMessage(e)}});if(e.subscriptions.push(t),n.shouldDisableExtensions&&Array.isArray(n.disabledExtensions)&&0!==n.disabledExtensions.length)try{const e=await o.getAllExtensionsFromVSCode();let t=!1;for(const i of e.enabled)n.findExtensionById(i.id)&&(await a.disableSnippetForExtension(i),t=!0);if(t){await n.updateVSCodeVersion();const e=await l();"Reload Window"===(null==e?void 0:e.title)&&r()}}catch(e){i.window.showErrorMessage(e)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getAllExtensionsFromVSCode=n.getExtensionIdFromText=void 0;const i=t(1),o=t(2),s=t(0);n.getExtensionIdFromText=function(e){return(null==e?void 0:e.includes("built-in"))?e.slice(0,e.indexOf("(built-in)")-1):(null==e?void 0:e.includes("installed"))?e.slice(0,e.indexOf("(installed)")-1):void 0},n.getAllExtensionsFromVSCode=async function(){const e=[],n=[],t=[];for(const a of s.extensions.all){const r=await i.promises.readFile(o.join(a.extensionPath,"package.json"),"utf-8"),l=JSON.parse(r);if(!l.contributes)continue;const d="vscode"===l.publisher,c=a.extensionKind===s.ExtensionKind.UI?"ðŸ”‹":"ðŸ”Œ";let u=l.name;!d&&l.displayName&&"%displayName%"!==l.displayName&&(u=l.displayName);const p={id:a.id,path:a.extensionPath,description:`${a.id} (${d?"built-in":"installed"}) ${c}`,name:u,packageJSON:l};l.contributes.snippets?(p.isSnippetsEnabled=!0,e.push(p),t.push(p)):l.contributes.snippets_disabled&&(p.isSnippetsEnabled=!1,e.push(p),n.push(p))}return{all:e,enabled:t,disabled:n,isAllDisabled:n.length===e.length,isAllEnabled:t.length===e.length}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ExtensionStore=void 0;const i=t(0);var o;!function(e){e.VSCODE_VERSION="vscode_version",e.DISABLED_EXTENSIONS="disabled_extensions"}(o||(o={}));n.ExtensionStore=class{constructor(e){this._globalState=e,this.disabledExtensions=e.get(o.DISABLED_EXTENSIONS);const n=e.get(o.VSCODE_VERSION);n&&n!==i.version&&(this._isNewVSCodeVersion=!0)}get shouldDisableExtensions(){return i.env.appName.includes("Insiders")||!!this._isNewVSCodeVersion}findExtensionById(e){var n;return null===(n=this.disabledExtensions)||void 0===n?void 0:n.find(n=>n.id===e)}async saveDisabledExtensions(e){const n=e.map(e=>({id:e.id}));await this._globalState.update(o.DISABLED_EXTENSIONS,n)}async updateVSCodeVersion(){await this._globalState.update(o.VSCODE_VERSION,i.version)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.enableSnippetForExtension=n.disableSnippetForExtension=void 0;const i=t(1),o=t(2);function s(e){return i.promises.writeFile(o.join(e.path,"package.json"),JSON.stringify(e.packageJSON))}n.disableSnippetForExtension=async function(e){const{contributes:n}=e.packageJSON;if(n.snippets_disabled)throw new Error(e.name+" is already disabled.");n.snippets_disabled=n.snippets,n.snippets=void 0,await s(e)},n.enableSnippetForExtension=async function(e){const{contributes:n}=e.packageJSON;if(n.snippets)throw new Error(e.name+" is already enabled.");n.snippets=n.snippets_disabled,n.snippets_disabled=void 0,await s(e)}}]);
//# sourceMappingURL=main.js.map